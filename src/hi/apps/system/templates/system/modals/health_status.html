{% extends "modals/action_done.html" %}
{% load icons %}
{% load tz %}

{% block modal_dialog_class %}hi-modal-dialog-800{% endblock %}

{% block title_text %}
{% icon "shield" size="sm" css_class="mr-2" %}
{{ monitor_label }} Health Status
{% endblock %}

{% block body %}
{% timezone USER_TIMEZONE %}

<div class="container-fluid px-0">
    <!-- Overall Provider Status -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="d-flex align-items-center mb-3">
                <span class="badge monitor-status-badge {{ health_status.status_badge_class }} mr-3">
                    {% icon health_status.status_icon size="sm" css_class="mr-2" %}
                    {{ health_status.status_display }}
                </span>
            </div>

            <!-- Provider Heartbeat -->
            {% if health_status.heartbeat %}
            <div class="row">
                <div class="col-sm-3"><strong>Provider Status:</strong></div>
                <div class="col-sm-9">
                    <span class="heartbeat-indicator {{ health_status.heartbeat_css_class }}"></span>
                    <span class="{{ health_status.heartbeat_text_class }}">{{ health_status.heartbeat_status_text }}</span>
                    <small class="text-muted-custom">
                        (last seen {{ health_status.heartbeat|localtime|date:"H:i:s" }})
                    </small>
                </div>
            </div>
            {% endif %}

            <div class="row mt-2">
                <div class="col-sm-3"><strong>Last Check:</strong></div>
                <div class="col-sm-9">{{ health_status.last_check|localtime|date:"M j, Y H:i:s" }}</div>
            </div>

            {% if health_status.error_message %}
            <div class="row mt-2">
                <div class="col-sm-3"><strong>Error Details:</strong></div>
                <div class="col-sm-9">
                    <div class="{{ health_status.status_alert_class }} p-2">
                        {{ health_status.error_message }}
                    </div>
                </div>
            </div>
            {% endif %}

            {% if health_status.error_count > 1 %}
            <div class="row mt-2">
                <div class="col-sm-3"><strong>Error Count:</strong></div>
                <div class="col-sm-9">{{ health_status.error_count }}</div>
            </div>
            {% endif %}
        </div>
    </div>

    <!-- Status Summary Alert -->
    <div class="row">
        <div class="col-12">
            <div class="alert {{ health_status.status_alert_class }}">
                <p class="mb-0">
                    {% icon health_status.status_icon size="sm" css_class="mr-2" %}
                    {{ health_status.status_summary_message }}
                </p>
            </div>
        </div>
    </div>
</div>

{% endtimezone %}
{% endblock %}
