{% load tz %}
{% timezone USER_TIMEZONE %}
<div class="table-responsive">
  <table class="table table-striped">
    <tbody>
      {% for sensor_history in sensor_history_list %}
      {% if sensor_history.details %}

      {% if sensor_history.has_video_stream %}
      <a href="{% url 'console_entity_video_sensor_history_detail' entity_id=sensor.entity_state.entity.id sensor_id=sensor.id sensor_history_id=sensor_history.id %}"
         data-async="true">
        <tr>
          <td><div class="text-center" status="{{ sensor_history.value }}"> {{ sensor_history.value }}</div></td>
          <td>{{ sensor_history.response_datetime|localtime }}</td>
        </tr>
      </a>
      {% else %}
      <a href="{% url 'sense_sensor_history_details' sensor_history_id=sensor_history.id %}"
         data-async="true">
        <tr>
          <td><div class="text-center" status="{{ sensor_history.value }}"> {{ sensor_history.value }}</div></td>
          <td>{{ sensor_history.response_datetime|localtime }}</td>
        </tr>
      </a>
      {% endif %}

      {% else %}
      <tr>
        <td><div class="text-center" status="{{ sensor_history.value }}"> {{ sensor_history.value }}</div></td>
        <td>{{ sensor_history.response_datetime|localtime }}</td>
      </tr>
      {% endif %}
      {% empty %}
      <tr><td colspan="2"><div class="alert alert-info" >No history.</div></td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
    
{% if show_all_link and sensor_history_list %}
<div>
  {% if sensor.provides_video_stream %}
  <a href="{% url 'console_entity_video_sensor_history' entity_id=sensor.entity_state.entity.id sensor_id=sensor.id %}"
     data-async="true">&gt;&gt; See All</a>
  {% else %}
  {# Use existing sensor history modal for non-video sensors #}
  <a href="{% url 'sense_sensor_history' sensor_id=sensor.id %}"
     data-async="true">&gt;&gt; See All</a>
  {% endif %}
</div>
{% endif %}
{% endtimezone %}
