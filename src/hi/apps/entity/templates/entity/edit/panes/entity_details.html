{% if request.view_parameters.is_editing %}
{% include "edit/panes/side_header.html" %}
{% endif %}

<div class="d-flex justify-content-between">
  <div class="h5"><small>Entity</small>: {{ entity.name }}</div>
  <div class="">
    <a href="{% url 'edit_item_details_close' %}"
       class="btn btn-tertiary" role="button" data-async="true">
      X
    </a>
  </div>
</div>

<div id="{{ DIVID.ENTITY_EDIT_PANE }}">
  {% include "entity/edit/panes/entity_edit.html" %}
</div>

<h5>Principals</h5>
<div id="hi-edit-entity-principals">
  <ul>
    {% for principal_entity in principal_entity_list %}
    <li>{{ principal_entity.name }}</li>
    {% empty %}
    <em>No principals</em>
    {% endfor %}
  </ul>
  
  <div class="">
    <a href="{% url 'entity_edit_principal_manage' entity_id=entity.id %}"
       class="btn btn-success btn-control" role="button" data-async="true">
      MANAGE PRINCIPALS
    </a>
  </div>
  
</div>

{% if entity_position_form %}
<h5>Geometry</h5>
<div id="{{ DIVID.ENTITY_POSITION_EDIT_PANE }}">
  {% include "entity/edit/panes/entity_position_edit.html" %}
</div>
{% endif %}

<h5>Delegates</h5>
<div id="hi-edit-entity-delegates">
  <div>TBD - DELEGATES</div>
</div>

<h5>States/Sensors/Controllers</h5>
{% for entity_state in entity.states.all %}
<div class="h6">{{ entity_state.name }}</div>
<ul>
  {% for sensor in entity_state.sensors.all %}
  <li>{{ sensor.name }} [sensor]</li>
  {% endfor %}
  {% for controller in entity_state.controllers.all %}
  <li>{{ controller.name }} [controller]</li>
  {% endfor %}
</ul>

{% empty %}
<em>No states</em>
{% endfor %}

<h5>Views</h5>
<div id="hi-edit-entity-views">
  {% include "entity/panes/entity_views.html" %}
</div>

{% if entity.can_user_delete %}
<div class="">
  <a href="{% url 'entity_edit_entity_delete' entity_id=entity.id %}"
     class="btn btn-danger btn-control" role="button" data-async="true">
    DELETE ENTITY
  </a>
</div>
{% else %}
<h5>Integration</h5>
<div>{{ entity.integration_id }} [{{ entity.integration_name }}]</div>

{% endif %}
