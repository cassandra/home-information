{% extends "modals/action_with_cancel.html" %}

{% block preamble %}
<form action="{% url 'event_definition_delete' id=event_definition.id %}"
      method="post" enctype="multipart/form-data"
      class="form" data-async="modal">
  {% csrf_token %}
{% endblock %}

{% block title_text %}
Delete Event Definition?
{% endblock %}

{% block body %}
<div>
Please confirm that you want to delete this event definition.
</div>
<div>
  <ul>
    {{ event_definition.name }}
    {% for event_clause in event_definition.event_clauses.all %}
    <div>Clause: {{ event_clause.entity_state.name }} = {{ event_clause.value }} ({{ event_clause.entity_state.entity_state_type.label }})</div>
    {% endfor %}
    {% for alarm_action in event_definition.alarm_actions.all %}
    <div>Alarm: {{ alarm_action.security_posture.label }} = {{ alarm_action.alarm_level.label }}</div>
    {% endfor %}
    {% for control_action in event_definition.control_actions.all %}
    <div>Control: {{ control_action.controller.name }} = {{ control_action.value }}</div>
    {% endfor %}
  </ul>
</div>
<div class="text-danger">
  This deletion cannot be undone.
</div>
{% endblock %}

{% block action_right %}
<button id="hi-delete-event-definition-button" type="submit" class="btn btn-lg btn-danger"
	name="action" value="delete">
  DELETE
</button>
{% endblock %}

{% block postamble %}
</form>
{% endblock %}
