<div id="hi-collection-view-main" class="hi-collection-view draggable-container"">
  <h5><sub>COLLECTION:</sub> {{ collection_data.collection.name }}</h5>

  {% for entity_info_data in collection_data.entity_info_data_list %}
  {% with entity=entity_info_data.entity %}
  <div id="{{ entity.html_id }}" 
       class="{% if request.is_editing %}draggable{% endif %}"
       {% if request.is_editing %}draggable="true"{% endif %}
        >
    <div class="d-flex justify-content-start">
      <div>
	{% if request.is_editing %}
	<a href="{% url 'entity_details' entity_id=entity.id %}"
	   data-async="true">
	  {{ entity.name }}
	</a>
	{% else %}
	<a href="{% url 'entity_info' entity_id=entity.id %}"
	   data-async="true">
	  {{ entity.name }}
	</a>
	{% endif %}
      </div>
      <div>
	Controls
      </div>
      <div>
	<h5>Sensor Responses</h5>
	<ul>
	  {% for sensor, sensor_response in entity_info_data.sensor_response_map.items %}
	  <li>Sensor: {{ sensor.name }}, Response: {{ sensor_response.value }}</li>
	  {% empty %}
	  <div><em>No sensors</em></div>
	  {% endfor %}
	</ul>
      </div>
    </div>
  </div>
  {% endwith %}
  {% empty %}
  <div><em>No entities in collection.</em></div>
  {% endfor %}
</div>
