{% load icons %}
{% comment %}
Secret Attribute Value Component
Renders a password input with show/hide toggle for existing secret attributes
{% endcomment %}

<div class="attr-v2-secret-field">
  <div class="attr-v2-secret-input-wrapper">
    <!-- Secret field as password input -->
    <input type="password" 
           id="{{ attribute_form.value.id_for_label }}"
           name="{{ attribute_form.value.html_name }}"
           class="form-control attr-v2-secret-input"
           value="{{ attribute_form.value.value|default_if_none:'' }}"
           readonly="readonly"
           {% if attribute_form.instance and not attribute_form.instance.is_editable %}disabled="true"{% endif %} />
    {% if attribute_form.value.errors %}
      <div class="invalid-feedback d-block">
        {{ attribute_form.value.errors }}
      </div>
    {% endif %}
    <button type="button" 
            class="btn btn-sm btn-outline-secondary attr-v2-secret-toggle"
            onclick="attrV2.toggleSecretField(this)"
            title="Show value">
      <span class="attr-v2-icon-show">{% icon "eye" size="sm" %}</span>
      <span class="attr-v2-icon-hide" style="display: none;">{% icon "eye-off" size="sm" %}</span>
    </button>
  </div>
</div>